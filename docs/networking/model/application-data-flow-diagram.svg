<svg xmlns="http://www.w3.org/2000/svg" width="600" height="1010">

  <defs>
    <style type="text/css">
      text { font-family: Helvetica, Verdana, ArialUnicodeMS, san-serif }
    </style>
  </defs>
  <text x="360" y="10" font-size="11" text-anchor="middle">DICOM Standard Interface</text>
  <line x1="360" y1="20" x2="360" y2="1010" stroke="black" stroke-dasharray="2,4"/>

  <rect x="220" y="50" width="120" height="280" fill="none" stroke="black" />
  <text x="280" y="180" font-size="11" text-anchor="middle">Storage
    <tspan x="280" dy="12" text-anchor="middle">Application</tspan>
    <tspan x="280" dy="12" text-anchor="middle">Entity</tspan>
  </text>

  <line x1="150" y1="80" x2="220" y2="80" stroke="black" stroke-width="2" stroke-dasharray="8"/>
  <line x1="150" y1="80" x2="220" y2="190" stroke="black" stroke-width="2" stroke-dasharray="8"/>
  <circle cx="100" cy="80" r="50" fill="white" stroke="black"/>
  <text x="100" y="80" font-size="11" text-anchor="middle">Store
    <tspan x="100" dy="12" text-anchor="middle">Instances</tspan>
  </text>
  <path d="M 50 80 L 30 80 L 30 875 L 50 875" fill="none" stroke="black" stroke-width="2" stroke-dasharray="8"/>

  <line x1="150" y1="190" x2="220" y2="190" stroke="black" stroke-width="2" stroke-dasharray="8"/>
  <circle cx="100" cy="190" r="50" fill="white" stroke="black"/>
  <text x="100" y="190" font-size="11" text-anchor="middle">Reject
    <tspan x="100" dy="12" text-anchor="middle">Instances</tspan>
  </text>

  <line x1="150" y1="300" x2="220" y2="300" stroke="black" stroke-width="2" stroke-dasharray="8"/>
  <circle cx="100" cy="300" r="50" fill="white" stroke="black"/>
  <text x="100" y="290" font-size="11" text-anchor="middle">Verify
    <tspan x="100" dy="12" text-anchor="middle">Checksum of</tspan>
    <tspan x="100" dy="12" text-anchor="middle">Instances</tspan>
  </text>

  <circle cx="460" cy="80" r="50" fill="white" stroke="black"/>
  <text x="460" y="70" font-size="11" text-anchor="middle">Remote AE
    <tspan x="460" dy="12" text-anchor="middle">Sends</tspan>
    <tspan x="460" dy="12" text-anchor="middle">Instances</tspan>
  </text>
  <line x1="340" y1="80" x2="410" y2="80" stroke="black" stroke-width="2"/>
  <path d='M 340 80 l 12 -4 l 0 8' />
  <path d="M 510 80 L 530 80 L 530 630 L 510 630" fill="none" stroke="black" stroke-width="2" stroke-dasharray="8"/>

  <circle cx="460" cy="190" r="50" fill="white" stroke="black"/>
  <text x="460" y="180" font-size="11" text-anchor="middle">Remote AE
    <tspan x="460" dy="12" text-anchor="middle">Sends</tspan>
    <tspan x="460" dy="12" text-anchor="middle">Rejection Note</tspan>
  </text>
  <line x1="340" y1="190" x2="410" y2="190" stroke="black" stroke-width="2"/>
  <path d='M 340 190 l 12 -4 l 0 8' />

  <circle cx="460" cy="300" r="50" fill="white" stroke="black"/>
  <text x="460" y="280" font-size="11" text-anchor="middle">Remote AE
    <tspan x="460" dy="12" text-anchor="middle">Requests</tspan>
    <tspan x="460" dy="12" text-anchor="middle">Storage</tspan>
    <tspan x="460" dy="12" text-anchor="middle">Commitment</tspan>
  </text>
  <line x1="340" y1="290" x2="410" y2="290" stroke="black" stroke-width="2"/>
  <path d='M 340 290 l 12 -4 l 0 8' />
  <line x1="340" y1="310" x2="410" y2="310" stroke="black" stroke-width="2"/>
  <path d='M 410 310 l -12 -4 l 0 8' />

  <rect x="220" y="380" width="120" height="610" fill="none" stroke="black" />
  <text x="280" y="680" font-size="11" text-anchor="middle">Query/Retrieve
    <tspan x="280" dy="12" text-anchor="middle">Application</tspan>
    <tspan x="280" dy="12" text-anchor="middle">Entity</tspan>
  </text>

  <line x1="150" y1="465" x2="220" y2="410" stroke="black" stroke-width="2" stroke-dasharray="8"/>
  <line x1="150" y1="465" x2="220" y2="520" stroke="black" stroke-width="2" stroke-dasharray="8"/>
  <circle cx="100" cy="465" r="50" fill="white" stroke="black"/>
  <text x="100" y="465" font-size="11" text-anchor="middle">Query DB</text>

  <line x1="150" y1="575" x2="220" y2="520" stroke="black" stroke-width="2" stroke-dasharray="8"/>
  <line x1="150" y1="575" x2="220" y2="630" stroke="black" stroke-width="2" stroke-dasharray="8"/>
  <circle cx="100" cy="575" r="50" fill="white" stroke="black"/>
  <text x="100" y="565" font-size="11" text-anchor="middle">Forward
    <tspan x="100" dy="12" text-anchor="middle">Retrieve</tspan>
    <tspan x="100" dy="12" text-anchor="middle">Request</tspan>
  </text>

  <line x1="150" y1="685" x2="220" y2="410" stroke="black" stroke-width="2" stroke-dasharray="8"/>
  <line x1="150" y1="685" x2="220" y2="740" stroke="black" stroke-width="2" stroke-dasharray="8"/>
  <circle cx="100" cy="685" r="50" fill="white" stroke="black"/>
  <text x="100" y="675" font-size="11" text-anchor="middle">Forward
    <tspan x="100" dy="12" text-anchor="middle">Query</tspan>
    <tspan x="100" dy="12" text-anchor="middle">Request</tspan>
  </text>

  <line x1="150" y1="795" x2="220" y2="410" stroke="black" stroke-width="2" stroke-dasharray="8"/>
  <line x1="150" y1="795" x2="220" y2="740" stroke="black" stroke-width="2" stroke-dasharray="8"/>
  <circle cx="100" cy="795" r="50" fill="white" stroke="black"/>
  <text x="100" y="785" font-size="11" text-anchor="middle">Merge
    <tspan x="100" dy="12" text-anchor="middle">Attributes from</tspan>
    <tspan x="100" dy="12" text-anchor="middle">Leading Archive</tspan>
  </text>

  <line x1="150" y1="875" x2="220" y2="520" stroke="black" stroke-width="2" stroke-dasharray="8"/>
  <line x1="150" y1="875" x2="220" y2="850" stroke="black" stroke-width="2" stroke-dasharray="8"/>
  <line x1="150" y1="875" x2="220" y2="960" stroke="black" stroke-width="2" stroke-dasharray="8"/>
  <circle cx="100" cy="875" r="50" fill="white" stroke="black"/>
  <text x="100" y="875" font-size="11" text-anchor="middle">Export
    <tspan x="100" dy="12" text-anchor="middle">Instances</tspan>
  </text>

  <circle cx="460" cy="410" r="50" fill="white" stroke="black"/>
  <text x="460" y="400" font-size="11" text-anchor="middle">Remote AE
    <tspan x="460" dy="12" text-anchor="middle">Invokes Query</tspan>
    <tspan x="460" dy="12" text-anchor="middle">Command</tspan>
  </text>
  <line x1="340" y1="410" x2="410" y2="410" stroke="black" stroke-width="2"/>
  <path d='M 340 410 l 12 -4 l 0 8' />

  <circle cx="460" cy="520" r="50" fill="white" stroke="black"/>
  <text x="460" y="510" font-size="11" text-anchor="middle">Remote AE
    <tspan x="460" dy="12" text-anchor="middle">Invokes Retrieve</tspan>
    <tspan x="460" dy="12" text-anchor="middle">Command</tspan>
  </text>
  <line x1="340" y1="520" x2="410" y2="520" stroke="black" stroke-width="2"/>
  <path d='M 340 520 l 12 -4 l 0 8' />

  <circle cx="460" cy="630" r="50" fill="white" stroke="black"/>
  <text x="460" y="610" font-size="11" text-anchor="middle">Remote AE
    <tspan x="460" dy="12" text-anchor="middle">Receives</tspan>
    <tspan x="460" dy="12" text-anchor="middle">Retrieve</tspan>
    <tspan x="460" dy="12" text-anchor="middle">Command</tspan>
  </text>
  <line x1="340" y1="630" x2="410" y2="630" stroke="black" stroke-width="2"/>
  <path d='M 410 630 l -12 -4 l 0 8' />

  <circle cx="460" cy="740" r="50" fill="white" stroke="black"/>
  <text x="460" y="720" font-size="11" text-anchor="middle">Remote AE
    <tspan x="460" dy="12" text-anchor="middle">Receives</tspan>
    <tspan x="460" dy="12" text-anchor="middle">Query</tspan>
    <tspan x="460" dy="12" text-anchor="middle">Command</tspan>
  </text>
  <line x1="340" y1="740" x2="410" y2="740" stroke="black" stroke-width="2"/>
  <path d='M 410 740 l -12 -4 l 0 8' />

  <circle cx="460" cy="850" r="50" fill="white" stroke="black"/>
  <text x="460" y="840" font-size="11" text-anchor="middle">Remote AE
    <tspan x="460" dy="12" text-anchor="middle">Receives</tspan>
    <tspan x="460" dy="12" text-anchor="middle">Instances</tspan>
  </text>
  <line x1="340" y1="850" x2="410" y2="850" stroke="black" stroke-width="2"/>
  <path d='M 410 850 l -12 -4 l 0 8' />

  <circle cx="460" cy="960" r="50" fill="white" stroke="black"/>
  <text x="460" y="940" font-size="11" text-anchor="middle">Remote AE
    <tspan x="460" dy="12" text-anchor="middle">Receives</tspan>
    <tspan x="460" dy="12" text-anchor="middle">Storage</tspan>
    <tspan x="460" dy="12" text-anchor="middle">Commitment</tspan>
    <tspan x="460" dy="12" text-anchor="middle">Request</tspan>
  </text>
  <line x1="340" y1="950" x2="410" y2="950" stroke="black" stroke-width="2"/>
  <path d='M 340 950 l 12 -4 l 0 8' />
  <line x1="340" y1="970" x2="410" y2="970" stroke="black" stroke-width="2"/>
  <path d='M 410 970 l -12 -4 l 0 8' />

</svg>